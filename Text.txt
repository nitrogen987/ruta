386554025141183|8dAPQLc5SN81caIu_9-E_uo4nZo








Both Facebook and Linkedin use CSRF tokens. You have to first GET the page with the login form, then parse the HTML and get the CSRF token and then lastly make a POST request with username/password and CSRF token.

for post in posts:
			url = 'https://graph.facebook.com/v2.3/{0}/insights?access_token={1}'.format(post['id'], self.token)
			request = scrapy.Request(url, callback=self.parse_insights)
			request.meta['post'] = post
			yield request
	def parse_insights(self, response):
		insights_response = json.loads(response.text)
		filename = 'h'
		with open(filename, 'wb') as f:
			f.write(insights_response)
        # TODO: Deal with paging
		insights = insights_response.get('data')
		insight = dict((i.get('name'), self.flatten_values(i.get('values'))) for i in insights)
		post = response.meta.get('post')
		insight['post_url'] = first(post.get('actions'), {}).get('link')      # Url / Link
		insight['post_headline'] = post.get('name', 'Status Update')          # Headline
		insight['post_blurb'] = post.get('description', post.get('message'))  # Blurb

		yield InsightsItem(insight)
